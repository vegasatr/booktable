# TODO: Тесты для достижения 100% покрытия main.py

1. Тесты на все ветки ошибок и исключений в функциях:
   - start, restart, language_callback, budget_callback, location_callback, area_callback, choose_area_callback, show_pretty_restaurants, handle_location, talk, check_budget, save_user_to_db, get_db_connection, is_this_user_allowed, ask, append_interaction_to_chat_log, translate_message
2. Тесты на обработку неожиданных/невалидных входных данных (например, пустые сообщения, некорректные callback_data, отсутствие user_data, отсутствие location и т.д.)
3. Тесты на все альтернативные сценарии (например, пользователь отменяет бронирование, выбирает другой район, меняет язык на любом этапе, повторно вызывает /start и т.д.)
4. Тесты на корректность логирования ошибок и исключений
5. Тесты на корректную работу с базой данных при ошибках соединения, ошибках SQL, пустых результатах
6. Тесты на корректную работу с кнопками и reply_markup (например, если Telegram API возвращает ошибку)
7. Тесты на корректную работу с sessionid, chat_log, booking_data при edge-case сценариях
8. Тесты на корректную работу с fallback-сообщениями (например, если перевод не удался, если OpenAI не отвечает)
9. Тесты на корректную работу с разными языками (после восстановления OpenAI)
10. Тесты на корректную работу с командами /support, /filter, /help (если реализованы)
11. Тесты на корректную работу с нестандартными ситуациями (например, пользователь отправляет не текст, а фото, стикер, файл)
12. Тесты на корректную работу с несколькими пользователями одновременно (user_data isolation) 