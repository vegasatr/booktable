# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üêõ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–°–æ–æ–±—â–µ–Ω–∏—è –≤ –¥–∏–∞–ª–æ–≥–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∏–ª–∏—Å—å –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ:
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–∏–ª–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π
- –°–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º: "What time should I book the table for?"

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω—ã

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –ª–æ–≥–∏–∫–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `talk()` –≤ —Ñ–∞–π–ª–µ `main.py`:

```python
# –ë–´–õ–û (–ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–æ):
language = context.user_data.get('language', 'en')  # –°—Ç—Ä–æ–∫–∞ 249 - en –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é!
# ... –¥–∞–ª–µ–µ –ø–æ –∫–æ–¥—É —Ñ—É–Ω–∫—Ü–∏–∏
detected_lang = await detect_language(text)  # –°—Ç—Ä–æ–∫–∞ 275
language = context.user_data.get('language', detected_lang)  # –°—Ç—Ä–æ–∫–∞ 276 - –ü–û–ó–î–ù–û!
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –Ø–∑—ã–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è –∫–∞–∫ `'en'` –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞.

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 1. –ü–µ—Ä–µ–Ω–æ—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞ –≤ –Ω–∞—á–∞–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏

```python
# –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
async def talk(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user = update.effective_user
    text = update.message.text.strip()
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —è–∑—ã–∫ –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ
    detected_lang = await detect_language(text)
    language = context.user_data.get('language', detected_lang)
    
    # –ï—Å–ª–∏ —è–∑—ã–∫ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π
    if 'language' not in context.user_data:
        context.user_data['language'] = language
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```python
# –ó–∞–º–µ–Ω–µ–Ω–æ detected_lang –Ω–∞ language –≤ –±–ª–æ–∫–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:
save_user_to_db(language=language)  # –ë–´–õ–û: language=detected_lang
welcome_message = await translate_message('welcome', language)  # –ë–´–õ–û: detected_lang
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```python
logger.info(f"[BOOKING] _ask_for_time: language={language}, user_data keys: {list(context.user_data.keys())}")
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –ë—ã–ª–æ:
‚ùå –ü–µ—Ä–µ–≤–æ–¥—ã —Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ  
‚ùå –°–æ–æ–±—â–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º  
‚ùå –î–µ—Ñ–æ–ª—Ç–Ω—ã–π —è–∑—ã–∫ `'en'` –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ  

### –°—Ç–∞–ª–æ:
‚úÖ –Ø–∑—ã–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É –≤ –Ω–∞—á–∞–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è  
‚úÖ –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ  
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è

## üöÄ Deployment

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª–∞—Ö:
- `main.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞
- `src/bot/managers/booking_manager.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å—Å—è –Ω–∞ —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. 