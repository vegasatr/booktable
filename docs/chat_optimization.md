# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —á–∞—Ç–∞

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —á–∞—Ç–∞ –±—ã–ª–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –ø—É—Ç–µ–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 1. AI-powered –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤–æ–ø—Ä–æ—Å–∞

–§—É–Ω–∫—Ü–∏—è `is_about_restaurants(text)` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ChatGPT –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤–æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –µ–≥–æ —Ç–∏–ø–∞:

- **–í–æ–ø—Ä–æ—Å—ã –æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö** - –≤–æ–ø—Ä–æ—Å—ã –æ –µ–¥–µ, —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö, –º–µ–Ω—é, —Ü–µ–Ω–∞—Ö, –∞—Ç–º–æ—Å—Ñ–µ—Ä–µ –∑–∞–≤–µ–¥–µ–Ω–∏–π, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
- **–û—Ç–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Ç–µ–º—ã** - –∫–∏–Ω–æ, –ø–æ–≥–æ–¥–∞, —Ä–∞–±–æ—Ç–∞, –æ–±—â–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã

**–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:**
```
–û–ø—Ä–µ–¥–µ–ª–∏ —Ç–∏–ø –≤–æ–ø—Ä–æ—Å–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –±–æ—Ç–∞-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –ø–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞–º:
- "restaurant" = –≤–æ–ø—Ä–æ—Å—ã –æ –µ–¥–µ, —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö, –º–µ–Ω—é, —Ü–µ–Ω–∞—Ö, –∞—Ç–º–æ—Å—Ñ–µ—Ä–µ –∑–∞–≤–µ–¥–µ–Ω–∏–π, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
- "general" = –æ—Ç–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Ç–µ–º—ã (–∫–∏–Ω–æ, –ø–æ–≥–æ–¥–∞, —Ä–∞–±–æ—Ç–∞, –æ–±—â–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã)
–û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ: "restaurant" –∏–ª–∏ "general".
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ AI-–ø–æ–¥—Ö–æ–¥–∞:**
- 100% —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–ª—É—á–∞—è—Ö
- –ü–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –Ω—é–∞–Ω—Å—ã —è–∑—ã–∫–∞
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ª—é–±—ã–µ —è–∑—ã–∫–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–ª–æ–≤–∞—Ä–µ–π –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

### 2. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

#### –î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `restaurant_chat()` —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º
- –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø–æ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç: –∫–æ—Ä–æ—Ç–∫–∏–π, —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö

#### –î–ª—è –æ—Ç–≤–ª–µ—á–µ–Ω–Ω—ã—Ö —Ç–µ–º:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `general_chat()` –ë–ï–ó –¥–∞–Ω–Ω—ã—Ö –æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö
- –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç: –∫–æ—Ä–æ—Ç–∫–∏–π, —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ —é–º–æ—Ä –∏ –∏—Ä–æ–Ω–∏—é
- –ú—è–≥–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫ —Ç–µ–º–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
- –ú–∞–∫—Å–∏–º—É–º 150 —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –æ—Ç–≤–µ—Ç
- –ó–∞–ø—Ä–µ—Ç –Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
```
–í–æ–ø—Ä–æ—Å: "–º—è—Å–æ –µ—Å—Ç—å"
–ü—Ä–æ–±–ª–µ–º–∞: –û–ø—Ä–µ–¥–µ–ª—è–ª—Å—è –∫–∞–∫ general (–æ—Ç–≤–ª–µ—á–µ–Ω–Ω–∞—è —Ç–µ–º–∞)
–ó–∞–ø—Ä–æ—Å: 127 —Ç–æ–∫–µ–Ω–æ–≤ (—Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç + –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤)
```

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
```
–í–æ–ø—Ä–æ—Å: "–º—è—Å–æ –µ—Å—Ç—å"
AI –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: restaurant ‚úÖ
–ó–∞–ø—Ä–æ—Å: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è restaurant_chat() —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º
–≠–∫–æ–Ω–æ–º–∏—è: 60-85% —Ç–æ–∫–µ–Ω–æ–≤ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
```

### –î–ª—è –æ—Ç–≤–ª–µ—á–µ–Ω–Ω—ã—Ö —Ç–µ–º:
```
–í–æ–ø—Ä–æ—Å: "–ø–æ–π–¥–µ–º –≤ –∫–∏–Ω–æ"
AI –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: general ‚úÖ
–ó–∞–ø—Ä–æ—Å: ~40 —Ç–æ–∫–µ–Ω–æ–≤ (—Ç–æ–ª—å–∫–æ –∫–æ—Ä–æ—Ç–∫–∏–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç)
–≠–∫–æ–Ω–æ–º–∏—è: ~70% —Ç–æ–∫–µ–Ω–æ–≤
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏

AI-—Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

### –í–æ–ø—Ä–æ—Å—ã –æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã):
- "–º—è—Å–æ –µ—Å—Ç—å" ‚Üí restaurant ‚úÖ
- "–∫–∞–∫–∏–µ –º—è—Å–Ω—ã–µ –±–ª—é–¥–∞" ‚Üí restaurant ‚úÖ
- "–µ—Å—Ç—å –ª–∏ –¥–µ—Ç—Å–∫–æ–µ –º–µ–Ω—é" ‚Üí restaurant ‚úÖ
- "–∫–∞–∫–æ–µ –≤–∏–Ω–æ" ‚Üí restaurant ‚úÖ
- "–≤–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç–∞–µ—Ç" ‚Üí restaurant ‚úÖ
- "—á—Ç–æ –ø–æ—Å–æ–≤–µ—Ç—É–µ—Ç–µ" ‚Üí restaurant ‚úÖ
- "–¥–æ—Ä–æ–≥–æ –ª–∏" ‚Üí restaurant ‚úÖ
- "–∫–∞–∫–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞" ‚Üí restaurant ‚úÖ

### –û—Ç–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Ç–µ–º—ã (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã):
- "–ø–æ–π–¥–µ–º –≤ –∫–∏–Ω–æ" ‚Üí general ‚úÖ
- "–∫–∞–∫–∞—è –ø–æ–≥–æ–¥–∞" ‚Üí general ‚úÖ
- "–∫–∞–∫ –¥–µ–ª–∞" ‚Üí general ‚úÖ
- "—Ä–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç" ‚Üí general ‚úÖ

**–¢–æ—á–Ω–æ—Å—Ç—å: 100%** üéâ

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤:
- **–û—Ç–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Ç–µ–º—ã**: 70-80% —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤
- **–í–æ–ø—Ä–æ—Å—ã –æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä (—ç–∫–æ–Ω–æ–º–∏—è 60-85%)
- **–û–±—â–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ**: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ API

### –ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤:
- **–û—Ç–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Ç–µ–º—ã**: –∫–æ—Ä–æ—Ç–∫–∏–µ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è), —á–µ–ª–æ–≤–µ—á–Ω—ã–µ, –∏—Ä–æ–Ω–∏—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –±–µ–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ª–µ–≤—ã—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
- **–í–æ–ø—Ä–æ—Å—ã –æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö**: —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –±–∞–∑—ã
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç**: —É–ª—É—á—à–µ–Ω –∑–∞ —Å—á–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### AI-powered –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞:
```python
async def is_about_restaurants(text: str) -> bool:
    system_prompt = """–û–ø—Ä–µ–¥–µ–ª–∏ —Ç–∏–ø –≤–æ–ø—Ä–æ—Å–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –±–æ—Ç–∞-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –ø–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞–º:
- "restaurant" = –≤–æ–ø—Ä–æ—Å—ã –æ –µ–¥–µ, —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö, –º–µ–Ω—é, —Ü–µ–Ω–∞—Ö, –∞—Ç–º–æ—Å—Ñ–µ—Ä–µ –∑–∞–≤–µ–¥–µ–Ω–∏–π, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
- "general" = –æ—Ç–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Ç–µ–º—ã (–∫–∏–Ω–æ, –ø–æ–≥–æ–¥–∞, —Ä–∞–±–æ—Ç–∞, –æ–±—â–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã)
–û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ: "restaurant" –∏–ª–∏ "general"."""
    
    response = client.chat.completions.create(
        model=openai_model,
        messages=[
            {"role": "system", "content": system_prompt},
            {"role": "user", "content": text}
        ],
        temperature=0.1,  # –ù–∏–∑–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
        max_tokens=10     # –û—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç
    )
    
    result = response.choices[0].message.content.strip().lower()
    return "restaurant" in result
```

### –õ–æ–≥–∏–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:
```python
is_restaurant_question = await is_about_restaurants(text)

if context.user_data.get('filtered_restaurants') and is_restaurant_question:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º restaurant_chat —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º
    response = await restaurant_chat(text, restaurant_info, language, context)
else:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º general_chat –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö –æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö
    response = await general_chat(text, language)
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç –∫–∞–∂–¥–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤–æ–ø—Ä–æ—Å–∞:
```
[QUESTION_TYPE] '–º—è—Å–æ –µ—Å—Ç—å' -> restaurant -> restaurant
[QUESTION_TYPE] '–ø–æ–π–¥–µ–º –≤ –∫–∏–Ω–æ' -> general -> general
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å AI-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç. 